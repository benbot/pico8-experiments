pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
p = {x = 58, y = 58, maxspeed = 0.5, maxaccel = 5, vel = {0, 0}, acc = {0, 0}, startframe = 1, frame = 1, maxframe = 1, direction = 4}
directions = {{0, 0}, {0, 0}, {0, 0}, {0, 0}, {1, 0}, {1, 1}, {0, 1}, {0, 0}, {-1, 0}, {-1, -1}, {0, -1}, {1, -1}, {-1, 1}}
local function make_window(name, x, y, w, h, drawfn)
  local name0
  local _1_
  if drawfn then
    _1_ = drawfn
  else
    local function _2_()
      return nil
    end
    _1_ = _2_
  end
  name0 = {x = x, y = y, w = w, h = h, ["text-lines"] = {}, drawfn = _1_}
  return nil
end
local function draw_player()
  return spr(p.frame, p.x, p.y)
end
local init_dir_timer = 1
local dir_timer = init_dir_timer
local last_time = 0
local function player_update()
  local time = t()
  local delta = (time - last_time)
  if (dir_timer <= 0) then
    p.direction = (1 + flr(rnd(#directions)))
    dir_timer = init_dir_timer
  else
    dir_timer = (dir_timer - delta)
  end
  p.frame = (p.startframe + ((t() * 2) % (1 + p.maxframe)))
  p.x = (p.x + (p.maxspeed * directions[p.direction][1]))
  p.y = (p.y + (p.maxspeed * directions[p.direction][2]))
  if (p.x > 120) then
    p.x = 120
  else
  end
  if (p.x < 0) then
    p.x = 0
  else
  end
  if (p.y > 120) then
    p.y = 120
  else
  end
  if (p.y < 0) then
    p.y = 0
  else
  end
  last_time = time
  return nil
end
local function draw_textbox()
  local rect_w = 100
  local rect_h = 30
  return print(rect_w)
end
local function _init()
  make_window(test, 0, 0, 0, 0)
  return music(0)
end
local function _update()
  return player_update()
end
local function _draw()
  cls(0)
  draw_player()
  return draw_textbox()
end
__gfx__
00000000007007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000077777700070070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700770000770777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000708008077700007700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000700000077080080700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700700000077000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000070000700700007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007777000077770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5f555555555555e55c000000000000c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fcccccccccccccce5c000000000000c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5ca0000000000ac55c000000000000c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5c000000000000c55c000000000000c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5c000000000000c55c000000000000c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5c000000000000c55ca0000000000ac5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5c000000000000c5eccccccccccccccf000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5c000000000000c55e555555555555f5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
a401000d0e7570e7570e7571a75718757197570f75711757157570d7571b7571e7572175723757000070000700007000070000700007000070000700007000070000700007000070000700007000070000700007
1d10000018052180001c052180001c052180001f0521f0521f0521800018000280522805200000000003005200000000000000000000000000000000000000000000000000000000000000000000000000000000
051000000005200052040520405204052040520705207052070520705200000040520405200000000000005200000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
911000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
04 01024344

