pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
local player = {money = 100}
local pointer = {0, 0}
local pet = {x = (128 / 2), y = (128 / 2), maxspeed = 2, speed = 0.5, vel = {0, 0}, acc = {0, 0}, startframe = 1, frame = 1, ["anim-length"] = 1, hunger = 50, maxhunger = 100, direction = {1, 0}}
local directions = {{0, 0}, {0, 0}, {0, 0}, {0, 0}, {1, 0}, {1, 1}, {0, 1}, {0, 0}, {-1, 0}, {-1, -1}, {0, -1}, {1, -1}, {-1, 1}}
local fc = 1
local poops = {}
local function make_poop(x, y)
  add(poops, {x, y})
  return sfx(0)
end
local poopframe = 5
local function draw_poop()
  if (0 == (fc % 15)) then
    if (poopframe == 5) then
      poopframe = 6
    else
      poopframe = 5
    end
  else
  end
  for _, poo in pairs(poops) do
    spr(poopframe, poo[1], poo[2])
  end
  return nil
end
local function draw_pointer()
  return spr(16, (8 * pos[1]), (8 * pos[2]))
end
local function draw_pet()
  palt(0, nil)
  palt(12, t)
  spr(pet.frame, pet.x, pet.y)
  palt(0, t)
  return palt(12, nil)
end
local function idle_anim()
  if (0 == (fc % 30)) then
    if (pet.frame == (pet.startframe + pet["anim-length"])) then
      pet.frame = pet.startframe
      return nil
    else
      pet.frame = (1 + pet.frame)
      return nil
    end
  else
    return nil
  end
end
local function change_dir()
  local walk_chance = flr(rnd(100))
  if (walk_chance < 30) then
    pet.direction = rnd(directions)
    return nil
  else
    return nil
  end
end
local function walk()
  pet.x = (pet.x + (pet.speed * pet.direction[1]))
  pet.y = (pet.y + (pet.speed * pet.direction[2]))
  if (120 < pet.x) then
    pet.x = 120
  else
  end
  if (0 > pet.x) then
    pet.x = 0
  else
  end
  if (120 < pet.y) then
    pet.y = 120
  else
  end
  if (0 > pet.y) then
    pet.y = 0
    return nil
  else
    return nil
  end
end
local function step()
  pet.x = (pet.x + (8 * pet.direction[1]))
  pet.y = (pet.y + (8 * pet.direction[2]))
  if (120 < pet.x) then
    pet.x = 120
  else
  end
  if (0 > pet.x) then
    pet.x = 0
  else
  end
  if (120 < pet.y) then
    pet.y = 120
  else
  end
  if (0 > pet.y) then
    pet.y = 0
    return nil
  else
    return nil
  end
end
local function pet_update()
  idle_anim()
  if (0 == (fc % 20)) then
    if (45 < flr(rnd(100))) then
      pet.direction = rnd(directions)
      step()
    else
    end
  else
  end
  if (0 == (fc % 15)) then
    if (60 > flr(rnd(100))) then
      pet.hunger = (pet.hunger - 1)
      if (pet.hunger > 0) then
        if (8 > flr(rnd(100))) then
          make_poop(pet.x, pet.y)
        else
        end
      else
      end
    else
    end
  else
  end
  if (0 > pet.hunger) then
    pet.hunger = 0
  else
  end
  pet.speed = (pet.hunger / 100)
  if (pet.maxspeed < pet.speed) then
    pet.speed = pet.maxspeed
  else
  end
  if btn(0) then
    pet.hunger = (pet.hunger + 10)
  else
  end
  if btn(1) then
    pet.hunger = (pet.hunger - 10)
  else
  end
  if (pet.hunger < 10) then
    pet.startframe = 3
    return nil
  else
    return nil
  end
end
local function draw_cake()
  return sspr(0, 16, 16, 32, 32, 64)
end
local function _init()
  return music(0)
end
local function _update()
  if btn(4) then
    pet.hunger = (pet.hunger + 15)
    if (100 < pet.hunger) then
      pet.hunger = 100
    else
    end
  else
  end
  return pet_update()
end
local function _draw()
  cls(15)
  draw_pet()
  draw_poop()
  print(#poops)
  fc = (fc + 1)
  return nil
end
__gfx__
00000000cc7cc7cccccccccccc7cc7cccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cc7777cccc7cc7cccc7777cccc7cc7cc0006000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700c700007ccc7777ccc700007ccc7777cc0060006000060000000000000000000000000000000000000000000000000000000000000000000000000000
0007700070800807c700007c70000007c700007c0000060000600060000000000000000000000000000000000000000000000000000000000000000000000000
00077000700000077080080770000007709009070000000000000600000000000000000000000000000000000000000000000000000000000000000000000000
00700700700000077000000770900907700000070004400000044000000000000000000000000000000000000000000000000000000000000000000000000000
00000000c700007cc700007cc700007cc700007c0044440000444400000000000000000000000000000000000000000000000000000000000000000000000000
00000000cc7777cccc7777cccc7777cccc7777cc0444444004444440000000000000000000000000000000000000000000000000000000000000000000000000
aa0000aa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aa0000aa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aa222222222222aa5c000000000000c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ae333333333333ea5c000000000000c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23cccccccccccc325c000000000000c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23cccccccccccc325c000000000000c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23ccccc88ccccc325c000000000000c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23cccc7887cccc325ca0000000000ac5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23ccc777777ccc32eccccccccccccccf000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23cc7ffffff7cc325e555555555555f5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23cc7ffffff7cc320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23c7f777777f7c320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23c7ffffffff7c320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23cc7ffffff7cc320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23ccc777777ccc320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23cccccccccccc320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ae333333333333ea0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aa222222222222aa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
a10300002f1332b1332513324133230321f0321b032180321f1311b131182311f2320313200030000300003000000000000000000000000000000000000000000000000000000000000000000000000000000000
9110000018032180001c032180001c032180001f0321f0321f0321800018000280322803200000000003003200000000000000000000000000000000000000000000000000000000000000000000000000000000
911000000c0220c022100221002210022100221302213022130221302200000100221002200000000000c02200000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
911000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
04 01024344

